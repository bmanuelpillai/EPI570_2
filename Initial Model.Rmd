---
title: "Initial Model"
output: html_document
date: "2024-03-13"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r 3 All or Nothing}
AoN <- function(t, t0, parms) {
  with(as.list(c(t0, parms)), {
    # 1.Track the population sizes
    h.num <- s.h.num + i.h.num + r.h.num + v.h.num
    l.num <- s.l.num + i.l.num + r.l.num + v.l.num
    num <- h.num + l.num
    
    # 2. Define Contact Rate for low-sexual activity based on the rate for high sexual activity
    ce.l <- (ce.h * h.num)/l.num
    -----------------------------------------------# Unsure on this (How do I define the contact rate that is interdependent on high and low)
    # 2.Define lambda
    lambda.h <- (tau.h * ce.h * (? / num))
    lambda.l <- (tau.l * ce.l * (? / num))
    -----------------------------------------------# Unsure on this (we have infection probability * contact rate times number of people infected overall???)
    
    mu <- 1/lifespan
    gamma <- 1/dur.inf
    # 3.Write four differential equations
    
    #Susceptibles
    dSh <- (-lambda.h * s.h.num) + ((1 - (omega*chi)) * (mu * h.num) - (mu * s.h.num))
    dSl <- (-lambd.l * s.l.num) + ((1 - (omega*chi)) * (mu * l.num) - (mu * s.l.num))
    #Infected
    dIh <- (lambda * s.h.num) - (gamma * i.h.num) - (mu * i.h.num)
    dIl <- (lambda * s.l.num) - (gamma * i.l.num) - (mu * i.l.num)
    #Recovered
    dRh <- (gamma * i.h.num) - (mu * r.h.num)
    dRl <- (gamma * i.l.num) - (mu * r.l.num)
    #Vaccinated
    dVh <- (omega * chi * (mu)*(h.num)) - (mu * v.h.num)
    dVl <- (omega * chi * (mu)*(l.num)) - (mu * v.l.num)
    # 4.Outputs
    list(c(dSh, dSl, dIh, dIl,dRh, dRl, dVh, dVl, 
           si.h.flow = lambda.h * s.h.num,
           si.l.flow = lambda.l * s.l.num,
           v.h.flow = (omega * chi * mu * h.num),
           v.l.flow = (omega * chi * mu * l.num)
    ))
  })
}

param <- param.dcm(tau = ?, ce = ?, lifespan = ? (Death rate/ Birthrate?), 
                   dur.inf = ?, omega = ?, chi = ?)

init <- init.dcm(s.h.num = ?, s.l.num = ?, i.h.num = ?, i.l.num = ?, r.h.num = ?, r.l.num = ?, v.h.num = ?, v.l.num = ?,
                 si.flow = ?, v.flow = 0)

control <- control.dcm(nsteps = ?, new.mod = AoN)

mod <- dcm(param, init, control)
mod
```
Overall effect of vaccination, direct effect of vaccination, indirect effect of vaccination.

